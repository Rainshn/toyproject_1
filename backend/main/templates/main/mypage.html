{% extends 'base.html' %}

{% block content %}
<!-- 최상단 바 -->
<div style="display:flex; justify-content:space-between; align-items:center; padding:10px 16px; border-bottom:1px solid #ddd; position:sticky; top:0; background:#fff; z-index:1000;">
    <div style="width:40px; font-size:24px; cursor:pointer;"><</div>
    <div style="font-weight:bold; text-align:center; flex-grow:1;">마이페이지</div>
    <div style="width:40px;"></div>
</div>

<!-- 프로필 영역 -->
<div style="display:flex; flex-direction: column; align-items: center; margin-top: 30px;">

    <!-- 원형 이미지 -->
    <img src="{{ user.profile_image_url|default_if_none:'/static/default_profile.png' }}" alt="프로필 이미지"
         style="width:120px; height:120px; border-radius:50%; object-fit: cover;"/>

    <!-- 닉네임 -->
    <h3 style="margin-top: 16px; margin-bottom: 4px;">{{ user.nickname }}</h3>

    <!-- 이메일 -->
    <p style="color: #666; margin: 0;">{{ user.email }}</p>

    <!-- 버튼 그룹 -->
    <div style="margin-top: 40px; display: flex; gap: 16px;">

        <!-- 로그아웃 폼 -->
        <form id="logout-form" method="post" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit" onclick="return confirmLogout()"
                style="padding: 8px 20px; border:none; border-radius: 4px; cursor:pointer;">
                로그아웃
            </button>
        </form>

        <!-- 회원탈퇴 폼 -->
        <form id="withdrawal-form" method="post" action="{% url 'withdrawal' %}">
            {% csrf_token %}
            <button type="submit" onclick="return confirmWithdrawal()"
                style="padding: 8px 20px; border:none; border-radius: 4px; cursor:pointer;">
                회원탈퇴
            </button>
        </form>
    </div>
</div>

<script>
  function confirmLogout() {
    return confirm('로그아웃 하시겠습니까?');
  }

  function confirmWithdrawal() {
    return confirm('회원탈퇴 하시겠습니까?');
  }
</script>

{% endblock %}
